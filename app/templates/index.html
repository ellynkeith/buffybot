<!DOCTYPE html>
<html>
<head>
    <title>Buffy Bot</title>
    <style>
        textarea {
            width: 300px;
            resize: vertical;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <h1>Chat with Buffy Characters</h1>

    <div id="chat-history"></div>

    <form id="chat-form">
        <select id="character">
            <option value="Buffy">Buffy</option>
            <option value="Willow">Willow</option>
            <option value="Xander">Xander</option>
            <option value="Giles">Giles</option>
            <option value="Spike">Spike</option>
        </select>
        <textarea id="message" placeholder="Type your message..." rows="3"></textarea>
        <button type="submit">Send</button>
    </form>

    <script>
        document.getElementById('chat-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const message = document.getElementById('message').value;
            const character = document.getElementById('character').value;

            // Add user message to chat
            const chatHistory = document.getElementById('chat-history');
            chatHistory.innerHTML += `<p><strong>You:</strong> ${message}</p>`;

            // Send to backend
            fetch('/chat', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({message: message, character: character})
            })
            .then(response => response.json())
            .then(
            data => {
                console.log(data);
                chatHistory.innerHTML += `<p><strong>${character}:</strong> ${data.response.response}</p>`;
            });

            document.getElementById('message').value = '';
        });
    </script>
</body>
</html>